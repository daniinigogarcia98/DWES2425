
<!doctype html>
<html lang="en">
  <head>
    <title>Tienda</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.6.0.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div class="container">
      <form action="" method="post" class="mt-5">
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" name="email" class="form-control" placeholder="Email@email.com">
        </div>
        <div class="form-group">
          <label for="ps">Contrase√±a</label>
          <input type="password" id="ps" name="ps" class="form-control" placeholder="******">
        </div>
        <button type="button" class="btn btn-primary" onclick="login()">Enviar</button>
        <p>No tienes cuenta? <a href="registro.html">Registrate</a></p>
        <script>
            function login(){
  const url = 'http://localhost/DWES2425/U5/APITienda/public/api/login';
  const datos = {
    email: document.getElementById('email').value,
    ps: document.getElementById('ps').value
  }
  axios.post(url, datos)
  .then(response =>{
    const token = response.data.token;
    const us = response.data.nombreUS;
    localStorage.setItem('token',token);
    localStorage.setItem('us',us);
    window.location.href="tienda.html";
    if (response.data.status==200){
        alert('Login Correcto');
    }
  })
  .catch(error =>{
    if (error.response.status==401){
      alert('Login incorrecto');
    }
    });
}
        </script>
      </form>
    </div>
  </body>
</html>
